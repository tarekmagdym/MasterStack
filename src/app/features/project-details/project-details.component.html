<!-- Project Details Page -->

<div class="project-details-page" *ngIf="project">
  <!-- Hero Section -->
  <section class="project-hero">
    <div class="hero-background">
      <div class="gradient-orb orb-1"></div>
      <div class="gradient-orb orb-2"></div>
    </div>
    
    <div class="hero-container">
      <!-- Back Button -->
      <button class="back-button" (click)="goBack()" data-aos="fade-right">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M19 12H5M12 19l-7-7 7-7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>{{ currentLang === 'ar' ? 'العودة للمشاريع' : 'Back to Projects' }}</span>
      </button>
      
      <!-- Project Header -->
      <div class="project-header" data-aos="fade-up">
        <div class="project-tags">
          <span *ngFor="let tag of project.tags" class="project-tag">
            {{ currentLang === 'ar' ? tag.ar : tag.en }}
          </span>
        </div>
        
        <h1 class="project-title" [attr.lang]="currentLang">
          {{ currentLang === 'ar' ? project.titleAr : project.title }}
        </h1>
        
        <p class="project-subtitle" [attr.lang]="currentLang">
          {{ currentLang === 'ar' ? project.descriptionAr : project.description }}
        </p>
        
        <div class="project-meta-info">
          <div class="meta-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M19 21V5a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5m-4 0h4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <div class="meta-content">
              <span class="meta-label">{{ currentLang === 'ar' ? 'العميل' : 'Client' }}</span>
              <span class="meta-value">{{ project.client }}</span>
            </div>
          </div>
          
          <div class="meta-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <rect x="3" y="4" width="18" height="18" rx="2" stroke-width="2"/>
              <line x1="16" y1="2" x2="16" y2="6" stroke-width="2"/>
              <line x1="8" y1="2" x2="8" y2="6" stroke-width="2"/>
              <line x1="3" y1="10" x2="21" y2="10" stroke-width="2"/>
            </svg>
            <div class="meta-content">
              <span class="meta-label">{{ currentLang === 'ar' ? 'السنة' : 'Year' }}</span>
              <span class="meta-value">{{ project.year }}</span>
            </div>
          </div>
          
          <div class="meta-item">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="10" stroke-width="2"/>
              <polyline points="12 6 12 12 16 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <div class="meta-content">
              <span class="meta-label">{{ currentLang === 'ar' ? 'المدة' : 'Duration' }}</span>
              <span class="meta-value">{{ project.duration }}</span>
            </div>
          </div>
          
          <a *ngIf="project.liveUrl" [href]="project.liveUrl" target="_blank" class="visit-website-btn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" stroke-width="2"/>
              <polyline points="15 3 21 3 21 9" stroke-width="2"/>
              <line x1="10" y1="14" x2="21" y2="3" stroke-width="2"/>
            </svg>
            {{ currentLang === 'ar' ? 'زيارة الموقع' : 'Visit Website' }}
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Image -->
  <section class="featured-image-section">
    <div class="section-container">
      <div class="featured-image" data-aos="zoom-in">
        <img [src]="project.image" [alt]="currentLang === 'ar' ? project.titleAr : project.title" />
        <div class="image-overlay"></div>
      </div>
    </div>
  </section>

  <!-- Project Overview -->
  <section class="project-overview-section">
    <div class="section-container">
      <div class="overview-grid">
        <!-- Description -->
        <div class="overview-main" data-aos="fade-up">
          <h2 class="section-title" [attr.lang]="currentLang">
            {{ currentLang === 'ar' ? 'نظرة عامة' : 'Project Overview' }}
          </h2>
          <p class="overview-text" [attr.lang]="currentLang">
            {{ currentLang === 'ar' ? project.fullDescriptionAr : project.fullDescription }}
          </p>
          
          <!-- Challenge & Solution -->
          <div class="challenge-solution" *ngIf="project.challenge">
            <div class="cs-item">
              <div class="cs-icon challenge-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <div class="cs-content">
                <h3 [attr.lang]="currentLang">{{ currentLang === 'ar' ? 'التحدي' : 'The Challenge' }}</h3>
                <p [attr.lang]="currentLang">{{ currentLang === 'ar' ? project.challengeAr : project.challenge }}</p>
              </div>
            </div>
            
            <div class="cs-item">
              <div class="cs-icon solution-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 1 1 7.072 0l-.548.547A3.374 3.374 0 0 0 14 18.469V19a2 2 0 1 1-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </div>
              <div class="cs-content">
                <h3 [attr.lang]="currentLang">{{ currentLang === 'ar' ? 'الحل' : 'Our Solution' }}</h3>
                <p [attr.lang]="currentLang">{{ currentLang === 'ar' ? project.solutionAr : project.solution }}</p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Sidebar -->
        <div class="overview-sidebar">
          <!-- Technologies -->
          <div class="sidebar-card" data-aos="fade-up" data-aos-delay="100">
            <h3 [attr.lang]="currentLang">{{ currentLang === 'ar' ? 'التقنيات المستخدمة' : 'Technologies Used' }}</h3>
            <div class="tech-grid">
              <span *ngFor="let tech of project.technologies" class="tech-item">
                {{ tech }}
              </span>
            </div>
          </div>
          
          <!-- Results -->
          <div class="sidebar-card" *ngIf="project.results" data-aos="fade-up" data-aos-delay="200">
            <h3 [attr.lang]="currentLang">{{ currentLang === 'ar' ? 'النتائج' : 'Results' }}</h3>
            <ul class="results-list">
              <li *ngFor="let result of (currentLang === 'ar' ? project.resultsAr : project.results)">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <polyline points="20 6 9 17 4 12" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>{{ result }}</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="features-section" *ngIf="project.features">
    <div class="section-container">
      <h2 class="section-title center" data-aos="fade-up" [attr.lang]="currentLang">
        {{ currentLang === 'ar' ? 'الميزات الرئيسية' : 'Key Features' }}
      </h2>
      
      <div class="features-grid">
        <div 
          *ngFor="let feature of (currentLang === 'ar' ? project.featuresAr : project.features); let i = index" 
          class="feature-card"
          data-aos="fade-up"
          [attr.data-aos-delay]="100 + (i * 50)">
          <div class="feature-icons">
            <div class="feature-number-badge">{{ (i + 1).toString().padStart(2, '0') }}</div>
            <div class="feature-icon-circle">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <polyline points="20 6 9 17 4 12" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
          <p class="feature-text" [attr.lang]="currentLang">{{ feature }}</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Gallery Slider Section -->
  <section class="gallery-section" *ngIf="project.gallery && project.gallery.length > 0">
    <div class="section-container">
      <h2 class="section-title center" data-aos="fade-up" [attr.lang]="currentLang">
        {{ currentLang === 'ar' ? 'معرض الصور' : 'Project Gallery' }}
      </h2>
      
      <div class="gallery-slider" data-aos="fade-up" data-aos-delay="100">
        <!-- Slider Container -->
        <div class="slider-container">
          <!-- Slides -->
          <div class="slider-track" [style.transform]="'translateX(' + (currentLang === 'ar' ? currentSlideIndex : -currentSlideIndex) * 100 + '%)'">
            <div *ngFor="let image of project.gallery; let i = index" 
                 class="slider-slide"
                 [class.active]="i === currentSlideIndex">
              <div class="slide-image" (click)="openGalleryImage(image)">
                <img [src]="image" [alt]="'Gallery image ' + (i + 1)" />
                <div class="slide-overlay">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M21 21l-6-6m2-5a7 7 0 1 1-14 0 7 7 0 0 1 14 0zM10 7v6m3-3H7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  <span>{{ currentLang === 'ar' ? 'انقر للتكبير' : 'Click to zoom' }}</span>
                </div>
              </div>
              <div class="slide-counter">
                {{ i + 1 }} / {{ project.gallery.length }}
              </div>
            </div>
          </div>
          
          <!-- Navigation Arrows -->
          <button class="slider-arrow slider-arrow-prev" 
                  (click)="prevSlide()"
                  [class.disabled]="currentSlideIndex === 0">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M15 18l-6-6 6-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          
          <button class="slider-arrow slider-arrow-next" 
                  (click)="nextSlide()"
                  [class.disabled]="currentSlideIndex === project.gallery.length - 1">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M9 18l6-6-6-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Related Projects -->
  <section class="related-projects-section" *ngIf="relatedProjects.length > 0">
    <div class="section-container">
      <h2 class="section-title center" data-aos="fade-up" [attr.lang]="currentLang">
        {{ currentLang === 'ar' ? 'مشاريع مشابهة' : 'Related Projects' }}
      </h2>
      
      <div class="related-projects-grid">
        <div 
          *ngFor="let relProject of relatedProjects; let i = index" 
          class="related-project-card"
          data-aos="fade-up"
          [attr.data-aos-delay]="100 + (i * 100)"
          (click)="viewRelatedProject(relProject.id)">
          <div class="related-project-image">
            <img [src]="relProject.image" [alt]="currentLang === 'ar' ? relProject.titleAr : relProject.title" />
            <div class="related-overlay"></div>
          </div>
          <div class="related-project-content">
            <div class="related-tags">
              <span *ngFor="let tag of relProject.tags" class="related-tag">
                {{ currentLang === 'ar' ? tag.ar : tag.en }}
              </span>
            </div>
            <h3 [attr.lang]="currentLang">
              {{ currentLang === 'ar' ? relProject.titleAr : relProject.title }}
            </h3>
            <p [attr.lang]="currentLang">
              {{ currentLang === 'ar' ? relProject.descriptionAr : relProject.description }}
            </p>
            <div class="related-arrow">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M5 12h14M12 5l7 7-7 7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="cta-section">
    <div class="cta-background">
      <div class="cta-orb orb-1"></div>
      <div class="cta-orb orb-2"></div>
    </div>
    
    <div class="cta-container" data-aos="zoom-in">
      <div class="cta-content">
        <h2 class="cta-title" [attr.lang]="currentLang">
          {{ currentLang === 'ar' ? 'مهتم بمشروع مماثل؟' : 'Interested in a Similar Project?' }}
        </h2>
        <p class="cta-text" [attr.lang]="currentLang">
          {{ currentLang === 'ar' 
            ? 'دعنا نناقش كيف يمكننا مساعدتك في تحقيق أهدافك الرقمية'
            : 'Let\'s discuss how we can help you achieve your digital goals'
          }}
        </p>
        <div class="cta-actions">
          <a routerLink="/contact" class="cta-primary-btn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke-width="2"/>
            </svg>
            {{ currentLang === 'ar' ? 'تواصل معنا' : 'Contact Us' }}
          </a>
          <button class="cta-secondary-btn" (click)="goBack()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M4 6a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6zM14 6a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2V6zM4 16a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-2zM14 16a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-2z" stroke-width="2"/>
            </svg>
            {{ currentLang === 'ar' ? 'جميع المشاريع' : 'All Projects' }}
          </button>
        </div>
      </div>
    </div>
  </section>
</div>

<!-- Gallery Lightbox -->
<div *ngIf="selectedGalleryImage" class="gallery-lightbox" (click)="closeGalleryImage()">
  <button class="lightbox-close">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
      <line x1="18" y1="6" x2="6" y2="18" stroke-width="2"/>
      <line x1="6" y1="6" x2="18" y2="18" stroke-width="2"/>
    </svg>
  </button>
  <div class="lightbox-content" (click)="$event.stopPropagation()">
    <img [src]="selectedGalleryImage" alt="Gallery image" />
  </div>
</div>